{
  "plan_definition": "../../.codex/skills/workplan/plans/phase_plan.json",
  "plan_path": "/Users/bsmith/bnjam/hyperion/WORKPLAN.md",
  "phase_index": 0,
  "task_index": 0,
  "phases": [
    {
      "name": "Phase 1 \u2014 Document the flow",
      "summary": "Describe how authors use the generator, the phase tracker, and the helper script before running developer.",
      "tasks": [
        {
          "id": "T001",
          "summary": "Update the README/SKILL references, command checklist, and reference docs to describe the generator + progress flow.",
          "description": "Clarify that authors should run scripts/generate_plan.py, inspect execution/phase_progress.json, and refer to references/ASI_FRAMEWORK.md before invoking developer.",
          "commands": [
            "rg -n \"workplan-helper\" README.md",
            "rg -n \"phase_progress\" references"
          ],
          "verification": [
            "python3 scripts/generate_plan.py --definition plans/phase_plan.json --output WORKPLAN.md --progress execution/phase_progress.json"
          ],
          "status": "current"
        },
        {
          "id": "T002",
          "summary": "Capture the deterministic surface and open questions in the new references/ASI_FRAMEWORK.md plus references/QUESTIONS.md entries.",
          "description": "Document the ASI guidance in the top-level references so plan authors rely on visible docs.",
          "commands": [
            "cat references/ASI_FRAMEWORK.md",
            "cat references/QUESTIONS.md"
          ],
          "verification": [
            "scripts/validate-plan.sh --plan ./WORKPLAN.md --required \"Intent,Goals,Non-Goals,Scope,Constraints,Plan,Commands,Validation,Approval\" --approval-pattern \"^Approved:[[:space:]]+yes$\""
          ],
          "status": "pending"
        }
      ]
    },
    {
      "name": "Phase 2 \u2014 Generate phased plans",
      "summary": "Introduce scripts that render WORKPLAN.md from the definition and output execution/phase_progress.json.",
      "tasks": [
        {
          "id": "T003",
          "summary": "Create scripts/generate_plan.py and scripts/update_phase_progress.py to keep phases/tasks structured and track status.",
          "description": "Generate tasks with commands/listing plus a progress artifact that newbies can read.",
          "commands": [
            "python3 scripts/generate_plan.py --definition plans/phase_plan.json --output WORKPLAN.md --progress execution/phase_progress.json"
          ],
          "verification": [
            "cat execution/phase_progress.json"
          ],
          "status": "pending"
        },
        {
          "id": "T004",
          "summary": "Ensure WORKPLAN.md is regenerated from the definition whenever the definition changes.",
          "description": "The plan should always reflect the latest phases/tasks inside plans/phase_plan.json.",
          "commands": [
            "python3 scripts/generate_plan.py --definition plans/phase_plan.json --output WORKPLAN.md --progress execution/phase_progress.json"
          ],
          "verification": [
            "cat WORKPLAN.md"
          ],
          "status": "pending"
        }
      ]
    },
    {
      "name": "Phase 3 \u2014 Track progress from developer",
      "summary": "Hook developer's execute-plan loop into the workplan progress tracker and emit next-task context.",
      "tasks": [
        {
          "id": "T005",
          "summary": "Add scripts/workplan-helper.sh and update execute-plan.sh so the developer skill always queries workplan for the next task.",
          "description": "Each completed task triggers an update_phase_progress call and returns a structured JSON with the next phase/task context.",
          "commands": [
            "../developer/scripts/workplan-helper.sh next-task --plan ./WORKPLAN.md --progress execution/phase_progress.json --task T005"
          ],
          "verification": [
            "python3 scripts/generate_plan.py --definition plans/phase_plan.json --output WORKPLAN.md --progress execution/phase_progress.json && cat execution/next_task_context.json"
          ],
          "status": "pending"
        },
        {
          "id": "T006",
          "summary": "Document how developer reads execution/next_task_context.json and phase_progress before resuming work.",
          "description": "Ensure plan authors see the structured message and understand how phases roll over.",
          "commands": [
            "cat execution/next_task_context.json"
          ],
          "verification": [
            "scripts/validate-plan.sh --plan ./WORKPLAN.md --required \"Intent,Goals,Non-Goals,Scope,Constraints,Plan,Commands,Validation,Approval\" --approval-pattern \"^Approved:[[:space:]]+yes$\""
          ],
          "status": "pending"
        }
      ]
    }
  ]
}